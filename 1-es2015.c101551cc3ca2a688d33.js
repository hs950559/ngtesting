(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{n2S4:function(t,o,e){"use strict";e.r(o),e.d(o,"BooksModule",(function(){return v}));var i=e("ofXK"),b=e("1+r1"),c=e("tyNb"),r=e("0IaG");function n(){const t=new r.c;return t.disableClose=!0,t.autoFocus=!0,t.width="400px",t}var s=e("3Pt+"),a=e("fXoL"),d=e("tk/3");const l="https://hkauthapi.herokuapp.com/books/";let u=(()=>{class t{constructor(t){this.http=t}getAll(){return this.http.get(l)}getOne(t){return this.http.get(`${l}${t}`)}add(t){return this.http.post(`${l}`,t)}update(t){return this.http.put(`${l}/${t._id}`,t)}delete(t){return this.http.delete(l+t)}getBookByAuthor(t){const o=(new d.c).set("author",t);return this.http.get(l,{params:o})}}return t.\u0275fac=function(o){return new(o||t)(a.Yb(d.a))},t.\u0275prov=a.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),h=(()=>{class t{constructor(t,o,e,i){this.fb=t,this.dialogRef=o,this.bookService=i,this.book=e.book,this.mode=e.mode}ngOnInit(){this.dialogTitle="create"===this.mode?"Add Book":"Update Book";const t={name:["",s.n.required],author:[""],price:[""],publishedDate:[new Date]};"update"===this.mode?(this.bookForm=this.fb.group(t),this.bookForm.patchValue(Object.assign({},this.book))):"create"===this.mode&&(this.bookForm=this.fb.group(Object.assign({},t)))}onClose(){this.dialogRef.close()}onSave(){const t=Object.assign(Object.assign({},this.book),this.bookForm.value);"update"===this.mode?this.bookService.update(t).subscribe(t=>{this.dialogRef.close(t)}):"create"===this.mode&&this.bookService.add(t).subscribe(t=>{this.dialogRef.close(t)})}}return t.\u0275fac=function(o){return new(o||t)(a.Ob(s.c),a.Ob(r.e),a.Ob(r.a),a.Ob(u))},t.\u0275cmp=a.Ib({type:t,selectors:[["app-edit-book-dialog"]],decls:29,vars:2,consts:[[3,"formGroup","ngSubmit"],[1,"form-group"],["for","exampleInputEmail1"],["type","text","id","name","name","name","placeholder","Name","formControlName","name",1,"form-control"],[1,"invalid-feedback"],["type","text","name","author","placeholder","Author","formControlName","author",1,"form-control"],["type","text","name","price","placeholder","Price","formControlName","price",1,"form-control"],["type","text","name","publishedDate","placeholder","Published Date","formControlName","publishedDate","readonly","",1,"form-control"],[1,"btn","btn-warning","mr-2",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(t,o){1&t&&(a.Ub(0,"form",0),a.cc("ngSubmit",(function(){return o.onSave()})),a.Ub(1,"div",1),a.Ub(2,"label",2),a.zc(3,"Name"),a.Tb(),a.Pb(4,"input",3),a.Ub(5,"div",4),a.zc(6," Please provide a valid city. "),a.Tb(),a.Tb(),a.Ub(7,"div",1),a.Ub(8,"label",2),a.zc(9,"Author"),a.Tb(),a.Pb(10,"input",5),a.Ub(11,"div",4),a.zc(12," Please provide a valid city. "),a.Tb(),a.Tb(),a.Ub(13,"div",1),a.Ub(14,"label",2),a.zc(15,"Price"),a.Tb(),a.Pb(16,"input",6),a.Ub(17,"div",4),a.zc(18," Please provide a valid city. "),a.Tb(),a.Tb(),a.Ub(19,"div",1),a.Ub(20,"label",2),a.zc(21,"Published Date"),a.Tb(),a.Pb(22,"input",7),a.Ub(23,"div",4),a.zc(24," Please provide a valid city. "),a.Tb(),a.Tb(),a.Ub(25,"button",8),a.cc("click",(function(){return o.onClose()})),a.zc(26," Close "),a.Tb(),a.Ub(27,"button",9),a.zc(28," Submit "),a.Tb(),a.Tb()),2&t&&(a.mc("formGroup",o.bookForm),a.Cb(27),a.mc("disabled",null==o.bookForm?null:o.bookForm.invalid))},directives:[s.o,s.k,s.e,s.b,s.j,s.d],styles:[""]}),t})();const p=function(t){return["/books",t]};function m(t,o){if(1&t){const t=a.Vb();a.Ub(0,"tr"),a.Ub(1,"td"),a.zc(2),a.Tb(),a.Ub(3,"td"),a.Ub(4,"a",8),a.zc(5),a.Tb(),a.Tb(),a.Ub(6,"td"),a.zc(7),a.Tb(),a.Ub(8,"td"),a.zc(9),a.Tb(),a.Ub(10,"td"),a.zc(11),a.Tb(),a.Ub(12,"td"),a.Ub(13,"button",9),a.cc("click",(function(){a.sc(t);const e=o.$implicit;return a.fc().editBook(e)})),a.Pb(14,"i",10),a.Tb(),a.Ub(15,"button",11),a.cc("click",(function(){a.sc(t);const e=o.$implicit;return a.fc().removeBook(e)})),a.Pb(16,"i",12),a.Tb(),a.Tb(),a.Tb()}if(2&t){const t=o.$implicit;a.Cb(2),a.Ac(t._id),a.Cb(2),a.mc("routerLink",a.oc(6,p,t._id)),a.Cb(1),a.Ac(t.name),a.Cb(2),a.Ac(t.author),a.Cb(2),a.Ac(t.price),a.Cb(2),a.Ac(t.publishedDate)}}function k(t,o){if(1&t&&(a.Sb(0),a.Ub(1,"div",1),a.Ub(2,"h1",2),a.Ub(3,"em"),a.zc(4),a.Tb(),a.Tb(),a.Ub(5,"pre"),a.zc(6),a.gc(7,"json"),a.Tb(),a.Tb(),a.Rb()),2&t){const t=o.ngIf;a.Cb(4),a.Ac(t.name),a.Cb(2),a.Ac(a.hc(7,2,t))}}const f=[{path:"",component:(()=>{class t{constructor(t,o){this.dialog=t,this.bookService=o}ngOnInit(){this.booksSubscription=this.bookService.getAll().subscribe(t=>{this.books=t}),this.getBookByAuthor()}removeBook(t){this.bookService.delete(t._id).subscribe(()=>{this.books=this.books.filter(o=>o._id!==t._id)})}editBook(t){const o=n();o.data={dialogTitle:"Edit Book",book:t,mode:"update"},this.dialog.open(h,o).afterClosed().subscribe(t=>{t&&(this.books=this.books.map(o=>o._id===t._id?t:o))})}addBook(){const t=n();t.data={dialogTitle:"Create Book",mode:"create"},this.dialog.open(h,t).afterClosed().subscribe(t=>{t&&(this.books=[t,...this.books])})}getBookByAuthor(){this.bookService.getBookByAuthor("Hemant").subscribe(t=>{console.log("books",t)})}}return t.\u0275fac=function(o){return new(o||t)(a.Ob(r.b),a.Ob(u))},t.\u0275cmp=a.Ib({type:t,selectors:[["app-books"]],decls:22,vars:1,consts:[[1,"header","d-flex","justify-content-between"],[1,"h1"],[1,"btn","btn-info",3,"click"],[1,"ti-plus"],[1,"table","table-bordered"],[1,"thead-light"],["scope","col"],[4,"ngFor","ngForOf"],[3,"routerLink"],[1,"btn","btn-primary","mr-2",3,"click"],[1,"ti-pencil"],[1,"btn","btn-danger",3,"click"],[1,"ti-trash"]],template:function(t,o){1&t&&(a.Ub(0,"div",0),a.Ub(1,"div",1),a.zc(2,"All Books"),a.Tb(),a.Ub(3,"button",2),a.cc("click",(function(){return o.addBook()})),a.Pb(4,"i",3),a.Tb(),a.Tb(),a.Ub(5,"table",4),a.Ub(6,"thead",5),a.Ub(7,"tr"),a.Ub(8,"th",6),a.zc(9,"#"),a.Tb(),a.Ub(10,"th",6),a.zc(11,"Name"),a.Tb(),a.Ub(12,"th",6),a.zc(13,"Author"),a.Tb(),a.Ub(14,"th",6),a.zc(15,"Price"),a.Tb(),a.Ub(16,"th",6),a.zc(17,"Published Date"),a.Tb(),a.Ub(18,"th",6),a.zc(19,"Actions"),a.Tb(),a.Tb(),a.Tb(),a.Ub(20,"tbody"),a.yc(21,m,17,8,"tr",7),a.Tb(),a.Tb()),2&t&&(a.Cb(21),a.mc("ngForOf",o.books))},directives:[i.k,c.g],styles:[""]}),t})()},{path:":bookId",component:(()=>{class t{constructor(t,o){this.route=t,this.bookService=o}ngOnInit(){const t=this.route.snapshot.paramMap.get("bookId");this.book$=this.bookService.getOne(t)}}return t.\u0275fac=function(o){return new(o||t)(a.Ob(c.a),a.Ob(u))},t.\u0275cmp=a.Ib({type:t,selectors:[["app-book"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"card","card-body"],[1,"text-center"]],template:function(t,o){1&t&&(a.yc(0,k,8,4,"ng-container",0),a.gc(1,"async")),2&t&&a.mc("ngIf",a.hc(1,1,o.book$))},directives:[i.l],pipes:[i.b,i.f],styles:[""]}),t})()}];let g=(()=>{class t{}return t.\u0275mod=a.Mb({type:t}),t.\u0275inj=a.Lb({factory:function(o){return new(o||t)},imports:[[c.h.forChild(f)],c.h]}),t})(),v=(()=>{class t{}return t.\u0275mod=a.Mb({type:t}),t.\u0275inj=a.Lb({factory:function(o){return new(o||t)},providers:[],imports:[[i.c,b.a,s.f,s.m,g],s.m]}),t})()}}]);